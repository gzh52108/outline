(function(e){function t(t){for(var r,s,u=t[0],i=t[1],l=t[2],d=0,p=[];d<u.length;d++)s=u[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);c&&c(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/manage/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"45ed":function(e,t,n){"use strict";n("e8a8")},"56d7":function(e,t,n){"use strict";n.r(t);n("0fae");var r=n("9e2f"),a=n.n(r),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2ca0"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],i={name:"App"},l=i,c=(n("5c0b"),n("2877")),d=Object(c["a"])(l,s,u,!1,null,null,null),p=d.exports,m=(n("d3b7"),n("8c4f")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-page"},[n("h1",[e._v("电商后台管理系统")]),n("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username",error:e.errorMsg}},[n("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password",error:e.errorMsg}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),n("el-form-item",[n("el-checkbox",{attrs:{label:"下次免登陆"},model:{value:e.ruleForm.mdl,callback:function(t){e.$set(e.ruleForm,"mdl",t)},expression:"ruleForm.mdl"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[e._v("登录")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){return e.goto("/forgotpassword")}}},[e._v("忘记密码?")])],1)],1)],1)},h=[],g=n("1da1"),v=n("5530"),b=(n("96cf"),n("2f62")),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100%"}},[n("el-header",{staticClass:"header"},[n("el-row",[n("el-col",{staticClass:"logo",attrs:{span:12}},[n("i",{staticClass:"el-icon-s-goods"}),n("span",[e._v("电商后台管理系统")])]),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[n("span",[e._v(e._s(e.userInfo.username)+" ")]),n("el-button",{attrs:{type:"text"},on:{click:e.logout}},[e._v("退出")])],1)],1)],1),n("el-container",[n("el-aside",{attrs:{width:"200px"}},[n("el-menu",{staticStyle:{height:"100%"},attrs:{mode:"vertical","background-color":"#545c64","text-color":"#fff","active-text-color":"#ff0",router:""}},[e._l(e.menu,(function(t){return[t.submenu?n("el-submenu",{key:t.path,attrs:{index:e.baseUrl+t.path},scopedSlots:e._u([{key:"title",fn:function(){return[n("i",{class:t.icon,staticStyle:{color:"#fff"}}),n("span",[e._v(e._s(t.text))])]},proxy:!0}],null,!0)},e._l(t.submenu,(function(r){return n("el-menu-item",{key:r.path,attrs:{index:e.baseUrl+t.path+r.path}},[e._v(e._s(r.text))])})),1):n("el-menu-item",{key:t.path,attrs:{index:e.baseUrl+t.path}},[n("i",{class:t.icon}),n("span",[e._v(e._s(t.text))])])]}))],2)],1),n("el-main",[n("transition",{attrs:{name:"slide-left"}},[n("router-view")],1)],1)],1)],1)},x=[],y={name:"Manage",data:function(){return{baseUrl:"/manage",menu:[{text:"首页",path:"/home",icon:"el-icon-s-home"},{text:"用户管理",path:"/user",icon:"el-icon-user",submenu:[{text:"添加用户",path:"/add"},{text:"用户列表",path:"/list"}]},{text:"商品管理",path:"/goods",icon:"el-icon-shopping-bag-1",submenu:[{text:"添加商品",path:"/add"},{text:"商品列表",path:"/list"}]},{text:"订单管理",path:"/order",icon:"el-icon-s-order"},{text:"广告管理",path:"/ad",icon:"el-icon-data-board",submenu:[{text:"添加广告",path:"/ad"},{text:"广告列表",path:"/list"}]},{text:"角色权限",path:"/access",icon:"el-icon-key",submenu:[{text:"添加角色",path:"/add"},{text:"角色列表",path:"/list"},{text:"权限指派",path:"/set"}]}],currentIndex:0}},computed:Object(v["a"])(Object(v["a"])({},Object(b["d"])(["userInfo"])),Object(b["c"])(["isLogin"])),methods:Object(v["a"])({},Object(b["b"])({logout:function(e){e("logout"),this.$router.push("/login")}}))},w=y,O=(n("45ed"),Object(c["a"])(w,_,x,!1,null,null,null)),j=O.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" Home ")])},k=[],S={name:"Home"},I=S,R=Object(c["a"])(I,$,k,!1,null,null,null),E=R.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 用户管理 "),n("keep-alive",{attrs:{include:/List$/}},[n("router-view")],1)],1)},L=[],z={},U=z,D=Object(c["a"])(U,F,L,!1,null,null,null),q=D.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.selectItem}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{type:"index",label:"#",width:"55"}}),n("el-table-column",{attrs:{type:"expand",width:"55"}}),n("el-table-column",{attrs:{prop:"username",label:"用户名"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("strong",[e._v(e._s(r.username))])]}}])}),n("el-table-column",{attrs:{prop:"regtime",label:"注册时间"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(" "+e._s(e.formatDate(n.regtime))+" ")]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-button",{directives:[{name:"pomission",rawName:"v-pomission:edit",arg:"edit"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editItem(r._id)}}},[e._v("编辑")]),n("el-button",{directives:[{name:"pomission",rawName:"v-pomission:delete",arg:"delete"}],attrs:{type:"danger",size:"small"},on:{click:function(t){return e.removeItem(r._id)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"page-size":e.size,layout:"total, prev, pager, next,sizes",total:e.total},on:{"current-change":e.pageChange,"size-change":e.sizeChange}})],1)},P=[],C={name:"UserList",data:function(){return{tableData:[],total:0,size:20,page:1}},created:function(){console.log("List.created"),this.getData()},destroyed:function(){console.log("List.destroyed")},activated:function(){console.log("List.activated")},deactivated:function(){console.log("List.deactivated")},methods:{getData:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request.get("/user",{params:{page:e.page,size:e.size}});case 2:n=t.sent,r=n.data,e.tableData=r.data.result,e.total=r.data.total;case 6:case"end":return t.stop()}}),t)})))()},formatDate:function(e){return new Date(e).toLocaleDateString()},removeItem:function(){},editItem:function(e){this.$router.push({name:"UserEdit",params:{id:e}})},selectItem:function(e){console.log("selection",e)},pageChange:function(e){this.page=e,this.getData()},sizeChange:function(e){this.size=e,this.getData()}}},J=C,N=Object(c["a"])(J,M,P,!1,null,null,null),T=N.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 用户添加 ")])},G=[],H={name:"UserAdd"},B=H,V=Object(c["a"])(B,A,G,!1,null,null,null),W=V.exports,K=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 用户编辑 "),n("input",{attrs:{type:"text"}})])}],X={name:"UserEdit"},Y=X,Z=Object(c["a"])(Y,K,Q,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 商品管理 "),n("router-view")],1)},ne=[],re={},ae=re,oe=Object(c["a"])(ae,te,ne,!1,null,null,null),se=oe.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 商品列表 ")])},ie=[],le={name:"GoodsList"},ce=le,de=Object(c["a"])(ce,ue,ie,!1,null,null,null),pe=de.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 商品添加 ")])},fe=[],he={name:"GoodsAdd"},ge=he,ve=Object(c["a"])(ge,me,fe,!1,null,null,null),be=ve.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 商品编辑 ")])},xe=[],ye={name:"GoodsEdit"},we=ye,Oe=Object(c["a"])(we,_e,xe,!1,null,null,null),je=Oe.exports,$e={path:"/manage",name:"Manage",component:j,children:[{path:"home",component:E},{path:"user",component:q,children:[{path:"list",component:T},{path:"add",component:W},{path:"edit/:id",name:"UserEdit",component:ee}]},{path:"goods",component:se,children:[{path:"list",component:pe},{path:"add",component:be},{path:"edit/:id",component:je}]}]},ke={data:function(){return{ruleForm:{username:"",password:"",mdl:!0},vcodeSvg:"",errorMsg:"",rules:{password:[{required:!0,message:"密码必填",trigger:"blur"}],username:[{required:!0,message:"用户名必填",trigger:"blur"}],vcode:[{required:!0,message:"请填写验证码",trigger:"blur"}]}}},computed:Object(v["a"])({},Object(b["c"])(["isLogin"])),methods:Object(v["a"])(Object(v["a"])({},Object(b["b"])({login:function(e,t){return e("login",t)}})),{},{submitForm:function(){var e=this;this.$refs["ruleForm"].validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(n){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,e.login(e.ruleForm);case 3:r=t.sent,200===r.code?(e.$message({message:"登录成功",type:"success"}),a=e.$route.query.redirectTo,o=void 0===a?"/manage/home":a,e.$router.push(o)):400===r.code?e.$message({message:"验证码错误",type:"error"}):401===r.code&&(e.errorMsg="用户名或密码错误");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getVcode:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$request.get("/vcode/picture");case 2:n=t.sent,r=n.data,e.vcodeSvg=r.data;case 5:case"end":return t.stop()}}),t)})))()}}),created:function(){}},Se=ke,Ie=(n("d6db"),n("e9f0"),Object(c["a"])(Se,f,h,!1,null,"17fc9cc8",null)),Re=Ie.exports;o["default"].use(m["a"]);var Ee=new m["a"]({routes:[{path:"/",redirect:"/login"},{path:"/login",component:Re}],scrollBehavior:function(e,t,n){return new Promise((function(e,t){setTimeout((function(){n||(n={}),n.behavior="smooth",e(n)}),500)}))}});console.log("router",Ee);var Fe=Ee,Le=n("bc3a"),ze=n.n(Le),Ue="http://120.76.247.5:2003",De=ze.a.create({baseURL:Ue+"/api"});De.baseUrl=Ue,De.interceptors.request.use((function(e){var t=localStorage.getItem("userInfo");try{t=JSON.parse(t)||{}}catch(n){t={}}return e.headers.Authorization=t.authorization,e})),De.interceptors.response.use((function(e){return e}));var qe=De;n("e9c4");function Me(e,t){localStorage.setItem(e,JSON.stringify(t))}var Pe=localStorage.getItem("userInfo");try{Pe=JSON.parse(Pe)||{}}catch(Ne){Pe={}}o["default"].use(b["a"]);var Ce=new b["a"].Store({state:{userInfo:Pe,addedRoute:!1},getters:{isLogin:function(e){return!!e.userInfo._id}},mutations:{login:function(e,t){e.userInfo=t,Me("userInfo",t)},logout:function(e){e.userInfo={},Me("userInfo")},addRoute:function(e){e.addedRoute||(Fe.addRoute($e),e.addedRoute=!0)},removeRoute:function(e){console.log("removeRoute"),Fe.addRoute({path:"/manage",name:"Manage",children:[]})}},actions:{login:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,qe.post("/login",t);case 2:return r=n.sent,a=r.data,200===a.code&&(e.commit("login",a.data),e.commit("addRoute")),n.abrupt("return",a);case 6:case"end":return n.stop()}}),n)})))()},logout:function(e){e.commit("logout"),e.commit("removeRoute")}}});Ce.getters.isLogin&&Ce.commit("addRoute");var Je=Ce;o["default"].use(a.a),o["default"].prototype.$request=qe,o["default"].config.productionTip=!1,o["default"].directive("pomission",{inserted:function(e,t,n){var r=Je.state.userInfo.permissions;console.log("binding",t,r,Je.state),r[t.arg]||(e.disabled=!0,e.classList.add("is-disabled"))}}),Fe.beforeEach((function(e,t,n){console.log("beforeEach"),e.path.startsWith("/manage")?Je.getters.isLogin?(Fe.app.$request.get("/user/verify",{params:{username:Je.state.userInfo.username}}).then((function(t){var n=t.data;401===n.code&&(Je.dispatch("logout"),Fe.push({path:"/login",query:{targetUrl:e.fullPath}}))})),n()):Fe.push({path:"/login",query:{targetUrl:e.fullPath}}):n()})),new o["default"]({router:Fe,store:Je,render:function(e){return e(p)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"81c7":function(e,t,n){},"9c0c":function(e,t,n){},d6db:function(e,t,n){"use strict";n("e67a")},e67a:function(e,t,n){},e8a8:function(e,t,n){},e9f0:function(e,t,n){"use strict";n("81c7")}});
//# sourceMappingURL=app.baf6b3d7.js.map