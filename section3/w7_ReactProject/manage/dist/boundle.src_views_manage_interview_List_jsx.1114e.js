"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkw5_React"] = self["webpackChunkw5_React"] || []).push([["src_views_manage_interview_List_jsx"],{

/***/ "./src/views/manage/interview/List.jsx":
/*!*********************************************!*\
  !*** ./src/views/manage/interview/List.jsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _utils_request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/request */ \"./src/utils/request.js\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd */ \"./node_modules/antd/es/message/index.js\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! antd */ \"./node_modules/antd/es/button/index.js\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ \"./node_modules/antd/es/popconfirm/index.js\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ \"./node_modules/antd/es/row/index.js\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ \"./node_modules/antd/es/col/index.js\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! antd */ \"./node_modules/antd/es/table/index.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/PlusOutlined.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/DeleteOutlined.js\");\n\n\n\n\n\nclass List extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  state = {\n    columns: [{}],\n    data: [],\n    total: 0,\n    page: 1,\n    size: 10,\n    selectIds: []\n  };\n  getData = async () => {\n    const {\n      page,\n      size\n    } = this.state;\n    const {\n      data\n    } = await _utils_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('/iq', {\n      params: {\n        page,\n        size\n      }\n    });\n    console.log('data=', data);\n    this.setState({\n      data: data.data.result,\n      total: data.data.total\n    });\n  };\n  goto = url => {\n    this.props.history.push({\n      pathname: url,\n      search: 'page=1&size=10',\n      state: {\n        c: 10,\n        d: 20\n      },\n      // 以下为自定义数据\n      username: 'laoxie',\n      params: {\n        a: 100,\n        b: 200\n      }\n    });\n  };\n  removeItems = async () => {\n    const {\n      selectIds\n    } = this.state;\n\n    if (selectIds.length === 0) {\n      antd__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warning('请求选择要删除的数据');\n      return;\n    }\n\n    const {\n      data\n    } = await _utils_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"][\"delete\"](`/iq`, {\n      data: {\n        ids: selectIds\n      }\n    });\n\n    if (data.status === 200) {\n      antd__WEBPACK_IMPORTED_MODULE_2__[\"default\"].success('删除成功'); // 重新获取数据\n\n      this.getData();\n    }\n  };\n  removeItem = id => {\n    const self = this;\n    return async function handle(e) {\n      const {\n        data\n      } = await _utils_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"][\"delete\"](`/iq/${id}`);\n\n      if (data.status === 200) {\n        antd__WEBPACK_IMPORTED_MODULE_2__[\"default\"].success('删除成功'); // 手动删除本地数据\n        // self.setState({\n        //     data:self.state.data.filter(item=>item._id !== id)\n        // })\n        // 重新获取数据\n\n        self.getData();\n      }\n    };\n  };\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    console.log('List.props', this.props);\n    const {\n      data,\n      total,\n      size\n    } = this.state;\n    const pagination = {\n      size: \"small\",\n      total,\n      showTotal: total => {\n        return `共${total}条记录`;\n      },\n      pageSize: size,\n      showSizeChanger: true,\n      onChange: (page, size) => {\n        this.setState({\n          page,\n          size\n        }, () => {\n          this.getData();\n        });\n      }\n    };\n    const rowSelection = {\n      onChange: (selectedRowKeys, selectedRows) => {\n        // selectedRowKeys: 选中行对应的rowKey组成的数组\n        // selectedRows：选中行对应的数据\n        console.log(selectedRowKeys, selectedRows);\n        this.setState({\n          selectIds: selectedRowKeys\n        });\n      }\n    };\n    const columns = [{\n      title: '#',\n      width: 50,\n\n      render(value, row, index) {\n        // value: dataIndex对应的值，如不指定dataIndex,则于row一致\n        return index + 1;\n      }\n\n    }, {\n      title: '面试题',\n      dataIndex: 'question',\n\n      render(value, row) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"h5\", null, row.question), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, row.answer, \"\\u56DE\\u7B54  \", row.hot, \"\\u67E5\\u770B\"));\n      }\n\n    }, {\n      title: '操作',\n      width: 160,\n      render: row => {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n          type: \"primary\",\n          size: \"small\",\n          ghost: true,\n          onClick: this.goto.bind(this, `/manage/interview/edit/${row._id}`)\n        }, \"\\u7F16\\u8F91\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n          title: \"\\u786E\\u8BA4\\u5220\\u9664\",\n          cancelText: \"\\u53D6\\u6D88\",\n          okText: \"\\u786E\\u8BA4\",\n          onConfirm: this.removeItem(row._id)\n        }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n          size: \"small\",\n          danger: true\n        }, \"\\u5220\\u9664\")));\n      }\n    }];\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n      gutter: [20, 20]\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n      span: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n      type: \"primary\",\n      icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__[\"default\"], null),\n      onClick: this.goto.bind(this, '/manage/interview/add')\n    }, \"\\u6DFB\\u52A0\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n      span: 12,\n      className: \"text-right\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n      title: \"\\u786E\\u8BA4\\u5220\\u9664\",\n      cancelText: \"\\u53D6\\u6D88\",\n      okText: \"\\u786E\\u8BA4\",\n      onConfirm: this.removeItems\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n      type: \"primary\",\n      icon: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_8__[\"default\"], null),\n      danger: true\n    }, \"\\u6279\\u91CF\\u5220\\u9664\")))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n      style: {\n        marginTop: 20\n      },\n      rowKey: \"_id\",\n      columns: columns,\n      dataSource: data,\n      rowSelection: rowSelection,\n      pagination: pagination\n    }));\n  }\n\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (List);\n\n//# sourceURL=webpack://w5_React/./src/views/manage/interview/List.jsx?");

/***/ })

}]);